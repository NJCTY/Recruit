<!DOCTYPE html>
<html lang="en">
<<<<<<< HEAD
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>找回密码</title>

    <!-- Bootstrap -->
    <link href="__ROOT__/css/bootstrap.min.css" rel="stylesheet">
    <link href="__ROOT__/css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrap">
      <!-- 导航栏 -->
      <nav class="navbar navbar-default navbar-inverse">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">个人中心</span>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav second-nav">
        <li class="nav-contain"><a href="http://localhost/index.php/Home/Index/changeDepartment" class="nav-link">修改信息</a></li>
        <li class="nav-contain active"><a href="#" class="nav-link">申请报名</a></li>
        <li class="nav-contain"><a href="#" class="nav-link">修改密码</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

      <div class="container tablecontain" id="main" >
          <table class="table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>社团</th>
                  <th>部门1</th>
                  <th>部门2</th>
                  <th>录取状态</th>
                  <th>操作</th>
                </tr>
                <tr>
                  <th>#</th>
                  <th>
                    <select class="form-control">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                  </th>
                  <th>
                    <select class="form-control">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                  </th>
                  <th>
                    <select class="form-control">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                  </th>
                  <th>#</th>
                  <th><div class="btn-group btn-group-sm" role="group" aria-label="Small button group">
                    <button type="button" class="btn btn-default">添加</button>
                  </div></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">1</th>
                  <td>社团</td>
                  <td>部门</td>
                  <td>部门</td>
                  <td>录取</td>
                  <td><div class="btn-group btn-group-sm" role="group" aria-label="Small button group">
                    <button type="button" class="btn btn-default">修改</button>
                    <button type="button" class="btn btn-default">删除</button>
                  </div></td>
                </tr>
                <tr>
                  <th scope="row">1</th>
                  <td>社团</td>
                  <td>部门</td>
                  <td>部门</td>
                  <td>录取</td>
                  <td><div class="btn-group btn-group-sm" role="group" aria-label="Small button group">
                    <button type="button" class="btn btn-default">修改</button>
                    <button type="button" class="btn btn-default">删除</button>
                  </div></td>
                </tr>
              </tbody>
          </table>
     
      </div> <!-- /container -->
    </div>
    <div class="footer">
      <div class="container bottom">
      <p class="test-muted">&copy; 校科协</p>
    </div>
    </div>
    <script src="__ROOT__/js/jquery-1.11.2.min.js"></script>
    <script src="__ROOT__/js/bootstrap.min.js"></script>
    <!--<script src="../../../../public/js/ajax.js"></script>-->
    <script>
    
    $(document).ready(function(){
      //array of judgement
    $("#changepassword").click(function(){
      console.log("123");
        if(($("#prepassword").attr("name")=="true")&&($("#newpassword").attr("name")=="true")&&($("#confirmpassword").attr("name")=="true")){
          $.ajax({  
                    type : "POST",  
                    url :"{:U('Home/User/doChangePassword')}"//待改
                    // success :function(){
                    //     console.log('success2');
                    // }
                });
        } else {
          if($("#prepassword").attr("name")=="false"){
            alert("请正确输入原密码");
          } else if($("#newpassword").attr("name")=="false"){
            alert("请正确输入密码");
          } else if($("#confirmpassword").attr("name")=="false"){
            alert("密码格式不正确或两次密码不一致");
          }
        }
    });
       
//is input property password(prepassword)
    $("#prepassword").blur(function(){
    if($("#prepassword").val().length == 0){
        $("#prepassword").css("border-color","#8B0000");
        $("#prepassword").attr("name","false");
    } else {
        $("#prepassword").css("border-color","#66afe9");
        $("#prepassword").attr("name","true");
    }
}); 

//is input property password(newpassword)
$("#newpassword").focus(function(){
  $("#newpassword").attr("placeholder","6-18位、字母或数字开头");
});
$("#newpassword").blur(function(){
  if(!$("#newpassword").val()){
  $("#newpassword").attr("placeholder","6-18位、字母或数字开头");
}
  var id = /^[a-zA-Z0-9]\w{5,17}$/;
    if(!id.test($("#newpassword").val())){
        $("#newpassword").css("border-color","#8B0000");
        $("#newpassword").attr("name","false");
    } else {
        $("#newpassword").css("border-color","#66afe9");
        $("#newpassword").attr("name","true");
    }
});
//is input property password again(confirmpassword)
$("#confirmpassword").focus(function(){
  $("#confirmpassword").attr("placeholder","请再次输入密码");
});
$("#confirmpassword").blur(function(){
  var id = /^[a-zA-Z0-9]\w{5,17}$/;
    if(($("#newpassword").val()==$("#confirmpassword").val())&&(id.test($("#newpassword").val()))){
        $("#confirmpassword").css("border-color","#66afe9");
        $("#confirmpassword").attr("name","true");
    } else {
        $("#confirmpassword").css("border-color","#8B0000");
        $("#confirmpassword").attr("name","false");
    }
});

});
    </script>
  </body>
=======
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <title>修改信息</title>
        <style type="text/css">
        .form{
            height: 300px;
            width: 800px;
            margin:auto;
            top: 100px;
        }
        .form label{
            display: block;
        }
        .form input{
            color: black;
        }
        body{ 
            background:-moz-linear-gradient(left top,#000,#373131);
            background: -webkit-gradient(linear,left top,right bottom,from(#000),to(#373131));
            background:linear-gradient(left top,#000,#373131);
            font-family: 微软雅黑;
            font-size: 18px;
            font-weight: 300;
            color: white;
        }
        .btn .btn-link{
            float: right;
        }

        </style>
    </head>
    <body> 
    <div>
    <div id="boxshell">
    <div class="navbar navbar-inverse" >
            <div class="navbar-inner nav-collapse" style="height:auto;">
                <a class="navbar-brand" href="#" style="font-family:幼圆;font-size="30px";font-color:#ffffff;font-weight:600;">个人中心</a>
                <ul class="nav navbar-nav">
                    <li><a href="{:U('Index/changeInfo')}" >修改信息</a></li>
                    <li><a href="{:U('Index/changeDepartment')}" >申请报名</a></li>
                    <li><a href="{:U('Index/changePassword')}" >修改密码</a></li>
                </ul>
            </div>
     </div>
     </div>
     <div class="form">
            <form onsubmit="return validate_form(this);" method="post">
                <label>姓名：<input type="text" id="name" maxlength="10"></label>
                <label>性别：<input type="text"  id="sex" maxlength="10"></label>
                <label>生日：<input type="text"  id="birthday" maxlength="20"></label>
                <label>qq号: <input type="text"  id="qq" maxlength="10"></label>
                <label>邮箱：<input type="text" id="E-mail" maxlength="20"></label>
                <label>电话：<input type="text" id="phone" maxlength="10"></label>
                <label>宿舍：<input type="text" id="dorm" maxlength="10"></label>
                <label>学院：<input type="text" id="college" maxlength="10"></label>
                <label>专业：<input type="text" id="major" maxlength="10"></label>
                <label>来自高中：<input type="text" id="gaozhong" maxlength="10"></label>
                <input type="button" value="提交" id="submit">
         </form>
        </div>
     
        </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
    $("#submit").on("click",function(){
        valid();
    });
    function valid(){
        var name = $("#name").val();
        var sex = $("#sex").val();
        var birthday = $("#birthday").val();
        var qq = $("#qq").val();
        var mail = $("#E-mail").val();
        var phone = $("#phone").val();
        var dorm = $("#dorm").val();
        var college = $("#college").val();
        var major = $("#major").val();
        var gaozhong = $("#gaozhong").val();
        var format = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (!mail.match(format)) {
            alert("请输入正确格式的邮箱。");
            return  false;
        }
        format = /^1[3|4|5|7|8][0-9]\d{4,8}$/;
        if (!phone.match(format)) {
            alert("请输入正确格式的电话号码");
            return false;
        }
        $.ajax({
            type:"POST",
            url:"{:U('User/doChangeInfo')}",
            data:{"name":name,"sex":sex,"birthday":birthday,"qq":qq,"mail":mail,"phone":phone,"dorm":dorm,"college":college,"major":major,"gaozhong":gaozhong},
            datatype:"json",
            success:function(back){
                alert(back);
                console.log(back);
            }
        })
        alert("修改成功！");
        return true;
    }
    function emailFormatCheck(email){
        if ((email.length > 128) || (email.length < 6)) {
            return false;
        }
        var format = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (!email.match(format)) {
            return false;
        }
        return true;
    }

    function mobilephoneFormatCheck(mobilephone){
        var format = /^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/;
        if (!mobilephone.match(format)) {
            return false;
        }
        return true;
    }
    function QQFormatCheck(qq){
        var format=/^[0-9]{6,10}$/;
        if(!qq.match(format)) {
            return false;
        }
        return true;
    }
</script>
    </body>
>>>>>>> bb76d70303cdabaefa433db3a3edbb78a63b4264
</html>