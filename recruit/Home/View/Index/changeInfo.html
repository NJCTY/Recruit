<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <title>修改信息</title>
        <style type="text/css">
        .form{
            height: 300px;
            width: 800px;
            margin:auto;
            top: 100px;
        }
        .form label{
            display: block;
        }
        .form input{
            color: black;
        }
        body{ 
            background:-moz-linear-gradient(left top,#000,#373131);
            background: -webkit-gradient(linear,left top,right bottom,from(#000),to(#373131));
            background:linear-gradient(left top,#000,#373131);
            font-family: 微软雅黑;
            font-size: 18px;
            font-weight: 300;
            color: white;
        }
        .btn .btn-link{
            float: right;
        }

        </style>
    </head>
    <body> 
    <div>
    <div id="boxshell">
    <div class="navbar navbar-inverse" >
            <div class="navbar-inner nav-collapse" style="height:auto;">
                <a class="navbar-brand" href="#" style="font-family:幼圆;font-size="30px";font-color:#ffffff;font-weight:600;">个人中心</a>
                <ul class="nav navbar-nav">
                    <li><a href="{:U('Index/changeInfo')}" >修改信息</a></li>
                    <li><a href="{:U('Index/changeDepartment')}" >申请报名</a></li>
                    <li><a href="{:U('Index/changePassword')}" >修改密码</a></li>
                </ul>
            </div>
     </div>
     </div>
     <div class="form">
            <form onsubmit="return validate_form(this);" method="post">
                <label>姓名：<input type="text" id="name" maxlength="10"></label>
                <label>性别：<input type="text"  id="sex" maxlength="10"></label>
                <label>生日：<input type="text"  id="birthday" maxlength="20"></label>
                <label>qq号: <input type="text"  id="qq" maxlength="10"></label>
                <label>邮箱：<input type="text" id="E-mail" maxlength="20"></label>
                <label>电话：<input type="text" id="phone" maxlength="10"></label>
                <label>宿舍：<input type="text" id="dorm" maxlength="10"></label>
                <label>学院：<input type="text" id="college" maxlength="10"></label>
                <label>专业：<input type="text" id="major" maxlength="10"></label>
                <label>来自高中：<input type="text" id="gaozhong" maxlength="10"></label>
                <input type="button" value="提交" id="submit">
         </form>
        </div>
     
        </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
    $("#submit").on("click",function(){
        valid();
    });
    function valid(){
        var name = $("#name").val();
        var sex = $("#sex").val();
        var birthday = $("#birthday").val();
        var qq = $("#qq").val();
        var mail = $("#E-mail").val();
        var phone = $("#phone").val();
        var dorm = $("#dorm").val();
        var college = $("#college").val();
        var major = $("#major").val();
        var gaozhong = $("#gaozhong").val();
        var format = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (!mail.match(format)) {
            alert("请输入正确格式的邮箱。");
            return  false;
        }
        format = /^1[3|4|5|7|8][0-9]\d{4,8}$/;
        if (!phone.match(format)) {
            alert("请输入正确格式的电话号码");
            return false;
        }
        $.ajax({
            type:"POST",
            url:"{:U('User/doChangeInfo')}",
            data:{"name":name,"sex":sex,"birthday":birthday,"qq":qq,"mail":mail,"phone":phone,"dorm":dorm,"college":college,"major":major,"gaozhong":gaozhong},
            datatype:"json",
            success:function(back){
                alert(back);
                console.log(back);
            }
        })
        alert("修改成功！");
        return true;
    }
    function emailFormatCheck(email){
        if ((email.length > 128) || (email.length < 6)) {
            return false;
        }
        var format = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (!email.match(format)) {
            return false;
        }
        return true;
    }

    function mobilephoneFormatCheck(mobilephone){
        var format = /^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/;
        if (!mobilephone.match(format)) {
            return false;
        }
        return true;
    }
    function QQFormatCheck(qq){
        var format=/^[0-9]{6,10}$/;
        if(!qq.match(format)) {
            return false;
        }
        return true;
    }
</script>
    </body>
</html>